<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="format-detection" content="telephone=no, email=no, address=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="è‰ºæœ¯å¹³å°">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>ç§»åŠ¨ç«¯Safariå…¼å®¹æ€§æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #667eea;
            background: -webkit-linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            /* ç§»åŠ¨ç«¯Safariå…¼å®¹æ€§ä¿®å¤ */
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            -webkit-perspective: 1000px;
            perspective: 1000px;
            display: block;
            visibility: visible;
            opacity: 1;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            /* ç§»åŠ¨ç«¯Safariç‰¹æ®Šä¿®å¤ */
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            position: relative;
            z-index: 2;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        
        .test-section h2 {
            font-size: 20px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .test-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .button {
            display: inline-block;
            padding: 12px 24px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            margin: 5px;
            font-size: 16px;
            border: none;
            cursor: pointer;
            -webkit-appearance: none;
            -webkit-tap-highlight-color: transparent;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }
        
        .button:hover {
            background: #2980b9;
        }
        
        .status {
            background: rgba(39, 174, 96, 0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .browser-info {
            background: rgba(52, 152, 219, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¨ ç§»åŠ¨ç«¯Safariå…¼å®¹æ€§æµ‹è¯•</h1>
            <p>æµ‹è¯•è‰ºæœ¯å¹³å°åœ¨ç§»åŠ¨ç«¯Safariä¸­çš„æ˜¾ç¤ºæ•ˆæœ</p>
        </div>
        
        <div class="status">
            âœ… é¡µé¢å·²åŠ è½½å®Œæˆ
        </div>
        
        <div class="browser-info" id="browserInfo">
            æ­£åœ¨æ£€æµ‹æµè§ˆå™¨ä¿¡æ¯...
        </div>
        
        <div class="test-section">
            <h2>åŠŸèƒ½æµ‹è¯•</h2>
            <div class="test-item">
                <h3>èƒŒæ™¯æ¸å˜</h3>
                <p>æ£€æŸ¥èƒŒæ™¯æ¸å˜æ˜¯å¦æ­£å¸¸æ˜¾ç¤º</p>
            </div>
            <div class="test-item">
                <h3>æ¯›ç»ç’ƒæ•ˆæœ</h3>
                <p>æ£€æŸ¥backdrop-filteræ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
            </div>
            <div class="test-item">
                <h3>æŒ‰é’®äº¤äº’</h3>
                <p>æ£€æŸ¥æŒ‰é’®ç‚¹å‡»æ˜¯å¦æ­£å¸¸å“åº”</p>
                <button class="button" onclick="testButton()">æµ‹è¯•æŒ‰é’®</button>
            </div>
        </div>
        
        <div class="test-section">
            <h2>å…¼å®¹æ€§ä¿¡æ¯</h2>
            <div class="info">
                <strong>å·²åº”ç”¨çš„ä¿®å¤ï¼š</strong><br>
                â€¢ å¼ºåˆ¶ç¡¬ä»¶åŠ é€Ÿ (translateZ(0))<br>
                â€¢ é˜²æ­¢å†…å®¹éšè— (backface-visibility: hidden)<br>
                â€¢ ç§»åŠ¨ç«¯Safariç‰¹æ®Šæ ·å¼<br>
                â€¢ è§¦æ‘¸äº‹ä»¶ä¼˜åŒ–<br>
                â€¢ æ–‡æœ¬å¤§å°è°ƒæ•´ç¦ç”¨
            </div>
        </div>
        
        <div class="test-section">
            <h2>æ“ä½œæµ‹è¯•</h2>
            <div class="info">
                <strong>è¯·æµ‹è¯•ä»¥ä¸‹æ“ä½œï¼š</strong><br>
                1. æ»šåŠ¨é¡µé¢ - æ£€æŸ¥æ˜¯å¦æµç•…<br>
                2. ç‚¹å‡»æŒ‰é’® - æ£€æŸ¥å“åº”æ˜¯å¦æ­£å¸¸<br>
                3. ç¼©æ”¾é¡µé¢ - æ£€æŸ¥å†…å®¹æ˜¯å¦æ­£å¸¸æ˜¾ç¤º<br>
                4. æ—‹è½¬è®¾å¤‡ - æ£€æŸ¥å¸ƒå±€æ˜¯å¦é€‚åº”
            </div>
            <button class="button" onclick="window.location.reload()">åˆ·æ–°é¡µé¢</button>
            <button class="button" onclick="testScroll()">æµ‹è¯•æ»šåŠ¨</button>
        </div>
    </div>

    <script>
        // æ£€æµ‹æµè§ˆå™¨ä¿¡æ¯
        function detectBrowser() {
            var userAgent = navigator.userAgent.toLowerCase();
            var isWeChat = /micromessenger/i.test(userAgent);
            var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
            var isMobile = /mobile|android|iphone|ipad|phone/i.test(userAgent);
            var isIOS = /iphone|ipad|ipod/i.test(userAgent);
            
            var browserInfo = document.getElementById('browserInfo');
            browserInfo.innerHTML = `
                <strong>æµè§ˆå™¨ä¿¡æ¯ï¼š</strong><br>
                ç”¨æˆ·ä»£ç†: ${navigator.userAgent}<br>
                å¾®ä¿¡æµè§ˆå™¨: ${isWeChat ? 'æ˜¯' : 'å¦'}<br>
                Safariæµè§ˆå™¨: ${isSafari ? 'æ˜¯' : 'å¦'}<br>
                ç§»åŠ¨è®¾å¤‡: ${isMobile ? 'æ˜¯' : 'å¦'}<br>
                iOSè®¾å¤‡: ${isIOS ? 'æ˜¯' : 'å¦'}<br>
                å±å¹•å°ºå¯¸: ${window.innerWidth} x ${window.innerHeight}
            `;
        }
        
        // æµ‹è¯•æŒ‰é’®åŠŸèƒ½
        function testButton() {
            alert('æŒ‰é’®ç‚¹å‡»æµ‹è¯•æˆåŠŸï¼');
        }
        
        // æµ‹è¯•æ»šåŠ¨åŠŸèƒ½
        function testScroll() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        
        // ç§»åŠ¨ç«¯Safariç‰¹æ®Šä¿®å¤
        function applySafariFixes() {
            var userAgent = navigator.userAgent.toLowerCase();
            var isIOS = /iphone|ipad|ipod/i.test(userAgent);
            var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
            var isMobile = /mobile|android|iphone|ipad|phone/i.test(userAgent);
            
            if (isIOS || (isSafari && isMobile)) {
                console.log('æ£€æµ‹åˆ°iOSè®¾å¤‡æˆ–ç§»åŠ¨ç«¯Safariï¼Œåº”ç”¨ç‰¹æ®Šä¿®å¤');
                
                // å¼ºåˆ¶ç¡¬ä»¶åŠ é€Ÿ
                document.body.style.webkitTransform = 'translateZ(0)';
                document.body.style.transform = 'translateZ(0)';
                document.body.style.webkitBackfaceVisibility = 'hidden';
                document.body.style.backfaceVisibility = 'hidden';
                document.body.style.webkitPerspective = '1000px';
                document.body.style.perspective = '1000px';
                
                // é˜²æ­¢iOS Safariçš„ç¼©æ”¾é—®é¢˜
                document.addEventListener('touchstart', function(e) {
                    if (e.touches.length > 1) {
                        e.preventDefault();
                    }
                }, { passive: false });
                
                // é˜²æ­¢iOS Safariçš„æ»šåŠ¨é—®é¢˜
                document.addEventListener('touchmove', function(e) {
                    if (e.touches.length > 1) {
                        e.preventDefault();
                    }
                }, { passive: false });
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            detectBrowser();
            applySafariFixes();
        });
        
        // çª—å£å¤§å°å˜åŒ–å¤„ç†
        window.addEventListener('resize', function() {
            detectBrowser();
        });
    </script>
</body>
</html>
